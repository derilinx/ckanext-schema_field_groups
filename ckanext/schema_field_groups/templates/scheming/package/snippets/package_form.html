{% ckan_extends %}

{% block errors %}
    {%- if errors -%}
        {%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}
        {%- snippet 'scheming/snippets/errors.html',
      errors=errors, fields=schema.dataset_fields,
      entity_type='dataset', object_type=dataset_type -%}
    {%- endif -%}
{% endblock %}

{% block basic_fields %}
    {%- if not dataset_type -%}
        <p>
            dataset_type not passed to template. your version of CKAN
            might not be compatible with ckanext-scheming
        </p>
    {%- endif -%}
    {%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}
    {%- set all_groups = h.schema_form_groups_list_of_groupings(schema) -%}

    <div class="container">
        <div id="groupTab" class="container">
            <ul class="nav nav-tabs nav-stacked col-md-2">
                {%- for group in all_groups -%}
                    <li><a href="#{{ group }}" data-toggle="tab">{{ group }}</a></li>
                {%- endfor -%}
            </ul>

            <div class="tab-content clearfix col-md-10">
                {%- for group in all_groups -%}
                    <div class="tab-pane" id="{{ group }}">
                        {%- for field in schema.dataset_fields -%}
                            {% if field.grouping == group %}
                                {%- if field.form_snippet is not none -%}
                                    {%- snippet 'scheming/snippets/form_field.html',
                                        field=field, data=data, errors=errors, licenses=c.licenses,
                                        entity_type='dataset', object_type=dataset_type -%}
                                {%- endif -%}
                            {%- endif -%}
                        {%- endfor -%}
                    </div>
                {%- endfor -%}

            </div>

            {%- if 'resource_fields' not in schema -%}
                <!-- force controller to skip resource-editing step for this type -->
                <input type="hidden" name="_ckan_phase" value=""/>
            {%- endif -%}

        </div>
    </div>
  {% resource 'schema_field_groups/js/datasetform.js' %}



{% endblock %}

{% block metadata_fields %}
{% endblock %}
